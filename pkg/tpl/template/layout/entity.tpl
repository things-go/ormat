// Code generated by ormat. DO NOT EDIT.
// version: {{.Version}}

package {{.PackageName}}

import (
    "gorm.io/gorm"
)

{{- range $e := .Structs}}

type {{$e.StructName}}_Entity struct {
	db *gorm.DB
}

func New_{{$e.StructName}}(db *gorm.DB) *{{$e.StructName}}_Entity {
	return &{{$e.StructName}}_Entity{
		db: db,
	}
}

func (x *{{$e.StructName}}_Entity) FirstOne(funcs ...func(*gorm.DB) *gorm.DB) (*{{$e.StructName}}, error) {
	var row {{$e.StructName}}

	err := x.First(&row, funcs...)
	if err != nil {
		return nil, err
	}
	return &row, nil
}

func (x *{{$e.StructName}}_Entity) First(dest any, funcs ...func(*gorm.DB) *gorm.DB) error {
	return x.db.Model(&{{$e.StructName}}{}).
		Scopes(funcs...).
		First(dest).Error
}

func (x *{{$e.StructName}}_Entity) TakeOne(funcs ...func(*gorm.DB) *gorm.DB) (*{{$e.StructName}}, error) {
	var row {{$e.StructName}}

	err := x.Take(&row, funcs...)
	if err != nil {
		return nil, err
	}
	return &row, nil
}

func (x *{{$e.StructName}}_Entity) Take(dest any, funcs ...func(*gorm.DB) *gorm.DB) error {
	return x.db.Model(&{{$e.StructName}}{}).
		Scopes(funcs...).
		Take(dest).Error
}

func (x *{{$e.StructName}}_Entity) LastOne(query any, funcs ...func(*gorm.DB) *gorm.DB) (*{{$e.StructName}}, error) {
	var row {{$e.StructName}}

	err := x.Last(&row, funcs...)
	if err != nil {
		return nil, err
	}
	return &row, nil
}

func (x *{{$e.StructName}}_Entity) Last(dest any, funcs ...func(*gorm.DB) *gorm.DB) error {
	return x.db.Model(&{{$e.StructName}}{}).
		Scopes(funcs...).
		Last(dest).Error
}

func (x *{{$e.StructName}}_Entity) ScanOne(funcs ...func(*gorm.DB) *gorm.DB) (*{{$e.StructName}}, error) {
	var row {{$e.StructName}}

	err := x.Scan(&row, funcs...)
	if err != nil {
		return nil, err
	}
	return &row, nil
}

func (x *{{$e.StructName}}_Entity) Scan(dest any, funcs ...func(*gorm.DB) *gorm.DB) error {
	return x.db.Model(&{{$e.StructName}}{}).
		Scopes(funcs...).
		Scan(dest).Error
}

func (x *{{$e.StructName}}_Entity) Pluck(column string, value any, funcs ...func(*gorm.DB) *gorm.DB) error {
	return x.db.Model(&{{$e.StructName}}{}).
		Scopes(funcs...).
		Pluck(column, value).Error
}

func (x *{{$e.StructName}}_Entity) Exist(funcs ...func(*gorm.DB) *gorm.DB) (exist bool,err error) {
	err = x.db.Model(&{{$e.StructName}}{}).
		Select("1").
		Scopes(funcs...).
		Limit(1).
		Scan(&exist).Error
	return exist, err
}

func (x *{{$e.StructName}}_Entity) FindAll(funcs ...func(*gorm.DB) *gorm.DB) ([]*{{$e.StructName}}, error) {
	var rows []*{{$e.StructName}}

	err := x.Find(&rows, funcs...)
	if err != nil {
		return nil, err
	}
	return rows, nil
}

func (x *{{$e.StructName}}_Entity) Find(dest any, funcs ...func(*gorm.DB) *gorm.DB) error {
	return x.db.Model(&{{$e.StructName}}{}).
		Scopes(funcs...).
		Find(dest).Error
}

func (x *{{$e.StructName}}_Entity) Create(value any) error {
	return x.db.Create(value).Error
}

func (x *{{$e.StructName}}_Entity) CreateInBatches(value any, batchSize int) error {
	return x.db.CreateInBatches(value, batchSize).Error
}

func (x *{{$e.StructName}}_Entity) Save(value any, funcs ...func(*gorm.DB) *gorm.DB) error {
	return x.db.Model(&{{$e.StructName}}{}).
		Scopes(funcs...).
		Save(value).Error
}

func (x *{{$e.StructName}}_Entity) Updates(value *{{$e.StructName}}, funcs ...func(*gorm.DB) *gorm.DB) error {
	return x.db.Model(&{{$e.StructName}}{}).
		Scopes(funcs...).
		Updates(value).Error
}

func (x *{{$e.StructName}}_Entity) Update(column string, value any, funcs ...func(*gorm.DB) *gorm.DB) error {
	return x.db.Model(&{{$e.StructName}}{}).
		Scopes(funcs...).
		Update(column, value).Error
}

func (x *{{$e.StructName}}_Entity) UpdateColumns(value *{{$e.StructName}}, funcs ...func(*gorm.DB) *gorm.DB) error {
	return x.db.Model(&{{$e.StructName}}{}).
		Scopes(funcs...).
		UpdateColumns(value).Error
}

func (x *{{$e.StructName}}_Entity) UpdateColumn(column string, value any, funcs ...func(*gorm.DB) *gorm.DB) error {
	return x.db.Model(&{{$e.StructName}}{}).
		Scopes(funcs...).
		UpdateColumn(column, value).Error
}

func (x *{{$e.StructName}}_Entity) Delete(funcs ...func(*gorm.DB) *gorm.DB) error {
	return x.db.Model(&{{$e.StructName}}{}).
		Scopes(funcs...).
		Delete(&{{$e.StructName}}{}).Error
}
{{- end}}